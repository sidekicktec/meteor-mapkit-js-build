{"version":3,"names":["Fiber","require","fs","path","Future","sourcemap_support","bootUtils","files","npmRequire","Profile","MIN_NODE_VERSION","hasOwn","Object","prototype","hasOwnProperty","global","_isFibersEnabled","process","env","DISABLE_FIBERS","lt","version","stderr","write","exit","serverJsonPath","resolve","argv","serverDir","dirname","serverJson","configJson","JSON","parse","readFileSync","programsDir","buildDir","starJson","join","__meteor_bootstrap__","startupHooks","__meteor_runtime_config__","meteorRelease","gitCommitHash","APP_ID","appId","parsedSourceMaps","meteorDebugFuture","METEOR_INSPECT_BRK","maybeWaitForDebuggerToAttach","pause","pauseThresholdMs","pollIntervalMs","waitStartTimeMs","Date","waitLimitMinutes","waitLimitMs","setTimeout","poll","pauseStartTimeMs","console","error","return","wait","load","forEach","fileInfo","sourceMap","rawSourceMap","parsedSourceMap","replace","sourcesContent","url","sourceMapRoot","sourceRoot","__dirname","retrieveSourceMap","pathForSourceMap","call","map","origWrapper","wrapCallSite","frame","wrapGetter","name","origGetter","arg","source","install","handleUncaughtExceptions","startCheckForLiveParent","parentPid","validPid","setInterval","kill","err","specialArgPaths","file","dynamicImportInfo","clientArchs","keys","clientPaths","arch","dynamicRoot","server","loadServerBundles","infos","code","nonLocalNodeModulesPaths","addNodeModulesPath","push","pathResolve","node_modules","info","local","statOrNull","statSync","e","Npm","getBucketName","stringify","length","fullPath","split","some","nodeModuleBase","packageBase","convertToOSPath","resolved","isAbsolute","Error","getAsset","assetPath","encoding","callback","fut","resolver","_callback","Package","meteor","Meteor","bindEnvironment","result","Uint8Array","log","stack","convertToStandardPath","unicodeNormalizePath","assets","filePath","readFile","Assets","getText","getBinary","undefined","absoluteFilePath","getServerDir","wrapParts","specialArgs","specialKeys","key","wrapped","fileInfoOSPath","scriptPath","func","runInThisContext","filename","displayErrors","args","fn","apply","callStartupHooks","hook","shift","time","runMain","mains","globalMain","main","exitCode","slice","METEOR_PARENT_PID","run"],"sources":["/tools/static-assets/server/boot.js"],"sourcesContent":["var Fiber = require(\"fibers\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar Future = require(\"fibers/future\");\nvar sourcemap_support = require('source-map-support');\n\nvar bootUtils = require('./boot-utils.js');\nvar files = require('./mini-files');\nvar npmRequire = require('./npm-require.js').require;\nvar Profile = require('./profile').Profile;\n\n// This code is duplicated in tools/main.js.\nvar MIN_NODE_VERSION = 'v14.0.0';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\n//  For now it's a function to ensure we don't get a falsy value.\n//  Once we figure out the best place to create this EV (maybe it's here),\n//  it won't need to be a function anymore.\n\nglobal._isFibersEnabled = function () {\n  return !process.env.DISABLE_FIBERS;\n};\n\nif (require('semver').lt(process.version, MIN_NODE_VERSION)) {\n  process.stderr.write(\n    'Meteor requires Node ' + MIN_NODE_VERSION + ' or later.\\n');\n  process.exit(1);\n}\n\n// read our control files\nvar serverJsonPath = path.resolve(process.argv[2]);\nvar serverDir = path.dirname(serverJsonPath);\nvar serverJson = require(\"./server-json.js\");\nvar configJson =\n  JSON.parse(fs.readFileSync(path.resolve(serverDir, 'config.json'), 'utf8'));\n\nvar programsDir = path.dirname(serverDir);\nvar buildDir = path.dirname(programsDir);\nvar starJson = JSON.parse(fs.readFileSync(path.join(buildDir, \"star.json\")));\n\n// Set up environment\n__meteor_bootstrap__ = {\n  startupHooks: [],\n  serverDir: serverDir,\n  configJson: configJson\n};\n\n__meteor_runtime_config__ = {\n  meteorRelease: configJson.meteorRelease,\n  gitCommitHash: starJson.gitCommitHash\n};\n\nif (!process.env.APP_ID) {\n  process.env.APP_ID = configJson.appId;\n}\n\n// Map from load path to its source map.\nvar parsedSourceMaps = {};\n\nconst meteorDebugFuture =\n  process.env.METEOR_INSPECT_BRK ? new Future : null;\n\nfunction maybeWaitForDebuggerToAttach() {\n  if (meteorDebugFuture) {\n    const { pause } = require(\"./debug\");\n    const pauseThresholdMs = 50;\n    const pollIntervalMs = 500;\n    const waitStartTimeMs = +new Date;\n    const waitLimitMinutes = 5;\n    const waitLimitMs = waitLimitMinutes * 60 * 1000;\n\n    // This setTimeout not only waits for the debugger to attach, but also\n    // keeps the process alive by preventing the event loop from running\n    // empty while the main Fiber yields.\n    setTimeout(function poll() {\n      const pauseStartTimeMs = +new Date;\n\n      if (pauseStartTimeMs - waitStartTimeMs > waitLimitMs) {\n        console.error(\n          `Debugger did not attach after ${waitLimitMinutes} minutes; continuing.`\n        );\n\n        meteorDebugFuture.return();\n\n      } else {\n        // This pause function contains a debugger keyword that will only\n        // act as a breakpoint once a debugging client has attached to the\n        // process, so we keep calling pause() until the first time it\n        // takes at least pauseThresholdMs, which indicates that a client\n        // must be attached. The only other signal of a client attaching\n        // is an unreliable \"Debugger attached\" message printed to stderr\n        // by native C++ code, which requires the parent process to listen\n        // for that message and then process.send a message back to this\n        // process. By comparison, this polling strategy tells us exactly\n        // what we want to know: \"Is the debugger keyword enabled yet?\"\n        pause();\n\n        if (new Date - pauseStartTimeMs > pauseThresholdMs) {\n          // If the pause() function call took a meaningful amount of\n          // time, we can conclude the debugger keyword must be active,\n          // which means a debugging client must be connected, which means\n          // we should stop polling and let the main Fiber continue.\n          meteorDebugFuture.return();\n\n        } else {\n          // If the pause() function call didn't take a meaningful amount\n          // of time to execute, then the debugger keyword must not have\n          // caused a pause, which means a debugging client must not be\n          // connected, which means we should keep polling.\n          setTimeout(poll, pollIntervalMs);\n        }\n      }\n    }, pollIntervalMs);\n\n    // The polling will continue while we wait here.\n    meteorDebugFuture.wait();\n  }\n}\n\n// Read all the source maps into memory once.\nserverJson.load.forEach(function (fileInfo) {\n  if (fileInfo.sourceMap) {\n    var rawSourceMap = fs.readFileSync(\n      path.resolve(serverDir, fileInfo.sourceMap), 'utf8');\n    // Parse the source map only once, not each time it's needed. Also remove\n    // the anti-XSSI header if it's there.\n    var parsedSourceMap = JSON.parse(rawSourceMap.replace(/^\\)\\]\\}'/, ''));\n    // source-map-support doesn't ever look at the sourcesContent field, so\n    // there's no point in keeping it in memory.\n    delete parsedSourceMap.sourcesContent;\n    var url;\n    if (fileInfo.sourceMapRoot) {\n      // Add the specified root to any root that may be in the file.\n      parsedSourceMap.sourceRoot = path.join(\n        fileInfo.sourceMapRoot, parsedSourceMap.sourceRoot || '');\n    }\n    parsedSourceMaps[path.resolve(__dirname, fileInfo.path)] = parsedSourceMap;\n  }\n});\n\nfunction retrieveSourceMap(pathForSourceMap) {\n  if (hasOwn.call(parsedSourceMaps, pathForSourceMap)) {\n    return { map: parsedSourceMaps[pathForSourceMap] };\n  }\n  return null;\n}\n\nvar origWrapper = sourcemap_support.wrapCallSite;\nvar wrapCallSite = function (frame) {\n  var frame = origWrapper(frame);\n  var wrapGetter = function (name) {\n    var origGetter = frame[name];\n    frame[name] = function (arg) {\n      // replace a custom location domain that we set for better UX in Chrome\n      // DevTools (separate domain group) in source maps.\n      var source = origGetter(arg);\n      if (! source)\n        return source;\n      return source.replace(/(^|\\()meteor:\\/\\/..app\\//, '$1');\n    };\n  };\n  wrapGetter('getScriptNameOrSourceURL');\n  wrapGetter('getEvalOrigin');\n\n  return frame;\n};\nsourcemap_support.install({\n  // Use the source maps specified in program.json instead of parsing source\n  // code for them.\n  retrieveSourceMap: retrieveSourceMap,\n  // For now, don't fix the source line in uncaught exceptions, because we\n  // haven't fixed handleUncaughtExceptions in source-map-support to properly\n  // locate the source files.\n  handleUncaughtExceptions: false,\n  wrapCallSite: wrapCallSite\n});\n\n// As a replacement to the old keepalives mechanism, check for a running\n// parent every few seconds. Exit if the parent is not running.\n//\n// Two caveats to this strategy:\n// * Doesn't catch the case where the parent is CPU-hogging (but maybe we\n//   don't want to catch that case anyway, since the bundler not yielding\n//   is what caused #2536).\n// * Could be fooled by pid re-use, i.e. if another process comes up and\n//   takes the parent process's place before the child process dies.\nvar startCheckForLiveParent = function (parentPid) {\n  if (parentPid) {\n    if (! bootUtils.validPid(parentPid)) {\n      console.error(\"METEOR_PARENT_PID must be a valid process ID.\");\n      process.exit(1);\n    }\n\n    setInterval(function () {\n      try {\n        process.kill(parentPid, 0);\n      } catch (err) {\n        console.error(\"Parent process is dead! Exiting.\");\n        process.exit(1);\n      }\n    }, 3000);\n  }\n};\n\nvar specialArgPaths = {\n  \"packages/modules-runtime.js\": function () {\n    return {\n      npmRequire: npmRequire,\n      Profile: Profile\n    };\n  },\n\n  \"packages/dynamic-import.js\": function (file) {\n    var dynamicImportInfo = {};\n    var clientArchs = configJson.clientArchs ||\n      Object.keys(configJson.clientPaths);\n\n    clientArchs.forEach(function (arch) {\n      dynamicImportInfo[arch] = {\n        dynamicRoot: path.join(programsDir, arch, \"dynamic\")\n      };\n    });\n\n    dynamicImportInfo.server = {\n      dynamicRoot: path.join(serverDir, \"dynamic\")\n    };\n\n    return { dynamicImportInfo: dynamicImportInfo };\n  }\n};\n\nvar loadServerBundles = Profile(\"Load server bundles\", function () {\n  var infos = [];\n\n  serverJson.load.forEach(function (fileInfo) {\n    var code = fs.readFileSync(path.resolve(serverDir, fileInfo.path));\n    var nonLocalNodeModulesPaths = [];\n\n    function addNodeModulesPath(path) {\n      nonLocalNodeModulesPaths.push(\n        files.pathResolve(serverDir, path)\n      );\n    }\n\n    if (typeof fileInfo.node_modules === \"string\") {\n      addNodeModulesPath(fileInfo.node_modules);\n    } else if (fileInfo.node_modules) {\n      Object.keys(fileInfo.node_modules).forEach(function (path) {\n        const info = fileInfo.node_modules[path];\n        if (! info.local) {\n          addNodeModulesPath(path);\n        }\n      });\n    }\n\n    // Add dev_bundle/server-lib/node_modules.\n    addNodeModulesPath(\"node_modules\");\n\n    function statOrNull(path) {\n      try {\n        return fs.statSync(path);\n      } catch (e) {\n        return null;\n      }\n    }\n\n    var Npm = {\n      /**\n       * @summary Require a package that was specified using\n       * `Npm.depends()`.\n       * @param  {String} name The name of the package to require.\n       * @locus Server\n       * @memberOf Npm\n       */\n      require: Profile(function getBucketName(name) {\n        return \"Npm.require(\" + JSON.stringify(name) + \")\";\n      }, function (name, error) {\n        if (nonLocalNodeModulesPaths.length > 0) {\n          var fullPath;\n\n          // Replace all backslashes with forward slashes, just in case\n          // someone passes a Windows-y module identifier.\n          name = name.split(\"\\\\\").join(\"/\");\n\n          nonLocalNodeModulesPaths.some(function (nodeModuleBase) {\n            var packageBase = files.convertToOSPath(files.pathResolve(\n              nodeModuleBase,\n              name.split(\"/\", 1)[0]\n            ));\n\n            if (statOrNull(packageBase)) {\n              return fullPath = files.convertToOSPath(\n                files.pathResolve(nodeModuleBase, name)\n              );\n            }\n          });\n\n          if (fullPath) {\n            return require(fullPath);\n          }\n        }\n\n        var resolved = require.resolve(name);\n        if (resolved === name && ! path.isAbsolute(resolved)) {\n          // If require.resolve(id) === id and id is not an absolute\n          // identifier, it must be a built-in module like fs or http.\n          return require(resolved);\n        }\n\n        throw error || new Error(\n          \"Cannot find module \" + JSON.stringify(name)\n        );\n      })\n    };\n\n    var getAsset = function (assetPath, encoding, callback) {\n      var fut;\n      if (! callback) {\n        fut = new Future();\n        callback = fut.resolver();\n      }\n      // This assumes that we've already loaded the meteor package, so meteor\n      // itself can't call Assets.get*. (We could change this function so that\n      // it doesn't call bindEnvironment if you don't pass a callback if we need\n      // to.)\n      var _callback = Package.meteor.Meteor.bindEnvironment(function (err, result) {\n        if (result && ! encoding)\n          // Sadly, this copies in Node 0.10.\n          result = new Uint8Array(result);\n        callback(err, result);\n      }, function (e) {\n        console.log(\"Exception in callback of getAsset\", e.stack);\n      });\n\n      // Convert a DOS-style path to Unix-style in case the application code was\n      // written on Windows.\n      assetPath = files.convertToStandardPath(assetPath);\n\n      // Unicode normalize the asset path to prevent string mismatches when\n      // using this string elsewhere.\n      assetPath = files.unicodeNormalizePath(assetPath);\n\n      if (! fileInfo.assets || ! hasOwn.call(fileInfo.assets, assetPath)) {\n        _callback(new Error(\"Unknown asset: \" + assetPath));\n      } else {\n        var filePath = path.join(serverDir, fileInfo.assets[assetPath]);\n        fs.readFile(files.convertToOSPath(filePath), encoding, _callback);\n      }\n      if (fut)\n        return fut.wait();\n    };\n\n    var Assets = {\n      getText: function (assetPath, callback) {\n        return getAsset(assetPath, \"utf8\", callback);\n      },\n      getBinary: function (assetPath, callback) {\n        return getAsset(assetPath, undefined, callback);\n      },\n      /**\n       * @summary Get the absolute path to the static server asset. Note that assets are read-only.\n       * @locus Server [Not in build plugins]\n       * @memberOf Assets\n       * @param {String} assetPath The path of the asset, relative to the application's `private` subdirectory.\n       */\n      absoluteFilePath: function (assetPath) {\n        // Unicode normalize the asset path to prevent string mismatches when\n        // using this string elsewhere.\n        assetPath = files.unicodeNormalizePath(assetPath);\n        assetPath = files.convertToStandardPath(assetPath);\n\n        if (! fileInfo.assets || ! hasOwn.call(fileInfo.assets, assetPath)) {\n          throw new Error(\"Unknown asset: \" + assetPath);\n        }\n\n        var filePath = path.join(serverDir, fileInfo.assets[assetPath]);\n        return files.convertToOSPath(filePath);\n      },\n      getServerDir: function() {\n        return serverDir;\n      }\n    };\n\n    var wrapParts = [\"(function(Npm,Assets\"];\n\n    var specialArgs =\n      hasOwn.call(specialArgPaths, fileInfo.path) &&\n      specialArgPaths[fileInfo.path](fileInfo);\n\n    var specialKeys = Object.keys(specialArgs || {});\n    specialKeys.forEach(function (key) {\n      wrapParts.push(\",\" + key);\n    });\n\n    // \\n is necessary in case final line is a //-comment\n    wrapParts.push(\"){\", code, \"\\n})\");\n    var wrapped = wrapParts.join(\"\");\n\n    // It is safer to use the absolute path when source map is present as\n    // different tooling, such as node-inspector, can get confused on relative\n    // urls.\n\n    // fileInfo.path is a standard path, convert it to OS path to join with\n    // __dirname\n    var fileInfoOSPath = files.convertToOSPath(fileInfo.path);\n    var absoluteFilePath = path.resolve(__dirname, fileInfoOSPath);\n\n    var scriptPath =\n      parsedSourceMaps[absoluteFilePath] ? absoluteFilePath : fileInfoOSPath;\n\n    var func = require('vm').runInThisContext(wrapped, {\n      filename: scriptPath,\n      displayErrors: true\n    });\n\n    var args = [Npm, Assets];\n\n    specialKeys.forEach(function (key) {\n      args.push(specialArgs[key]);\n    });\n\n    if (meteorDebugFuture) {\n      infos.push({\n        fn: Profile(fileInfo.path, func),\n        args\n      });\n    } else {\n      // Allows us to use code-coverage if the debugger is not enabled\n      Profile(fileInfo.path, func).apply(global, args);\n    }\n  });\n\n  maybeWaitForDebuggerToAttach();\n\n  infos.forEach(info => {\n    info.fn.apply(global, info.args);\n  });\n});\n\nvar callStartupHooks = Profile(\"Call Meteor.startup hooks\", function () {\n  // run the user startup hooks.  other calls to startup() during this can still\n  // add hooks to the end.\n  while (__meteor_bootstrap__.startupHooks.length) {\n    var hook = __meteor_bootstrap__.startupHooks.shift();\n    Profile.time(hook.stack || \"(unknown)\", hook);\n  }\n  // Setting this to null tells Meteor.startup to call hooks immediately.\n  __meteor_bootstrap__.startupHooks = null;\n});\n\nvar runMain = Profile(\"Run main()\", function () {\n  // find and run main()\n  // XXX hack. we should know the package that contains main.\n  var mains = [];\n  var globalMain;\n  if ('main' in global) {\n    mains.push(main);\n    globalMain = main;\n  }\n  if (typeof Package !== \"undefined\") {\n    Object.keys(Package).forEach(function (name) {\n      const { main } = Package[name];\n      if (typeof main === \"function\" &&\n          main !== globalMain) {\n        mains.push(main);\n      }\n    });\n  }\n  if (! mains.length) {\n    process.stderr.write(\"Program has no main() function.\\n\");\n    process.exit(1);\n  }\n  if (mains.length > 1) {\n    process.stderr.write(\"Program has more than one main() function?\\n\");\n    process.exit(1);\n  }\n  var exitCode = mains[0].call({}, process.argv.slice(3));\n  // XXX hack, needs a better way to keep alive\n  if (exitCode !== 'DAEMON')\n    process.exit(exitCode);\n\n  if (process.env.METEOR_PARENT_PID) {\n    startCheckForLiveParent(process.env.METEOR_PARENT_PID);\n  }\n});\n\nFiber(function () {\n  Profile.run(\"Server startup\", function () {\n    loadServerBundles();\n    callStartupHooks();\n    runMain();\n  });\n}).run();\n"],"mappings":"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","file":"tools/static-assets/server/boot.js.map"}